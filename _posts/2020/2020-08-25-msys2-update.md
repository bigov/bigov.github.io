---
layout: post
categories: site content
date: 2020-08-25 10:42:00
title: Обновление MSYS2
---

Если ваш `MSYS2` давно не обновлялся, то при выполнении стандартной команды обновления

```
$ pacman -Syyu
```

могут возникнуть сложности с сертификатами. Эта ситуация возникла после обновления продукта в июне 2020 г. Как написано на [странице новостей][msys2.org] сайта разработчика (Гугль-перевод):

> ... Алексей уходит с должности главного упаковщика,
> на его место назначены два новых упаковщика ...

По этой причине состав сертификатов изменился и это создало проблему при обновлении среды. Впрочем, проблема решаемая - подробности описаны на странице новостей на сайте разработчика [msys2.org], а здесь я кратко приведу очередность выполнения команд, необходимых для восстановления нормальной работоспособности пакета:

{% highlight bash %}

$ curl -O http://repo.msys2.org/msys/x86_64/msys2-keyring-r21.b39fb11-1-any.pkg.tar.xz
$ curl -O http://repo.msys2.org/msys/x86_64/msys2-keyring-r21.b39fb11-1-any.pkg.tar.xz.sig
$ pacman-key --verify msys2-keyring-r21.b39fb11-1-any.pkg.tar.xz.sig
$ pacman -U --config <(echo) msys2-keyring-r21.b39fb11-1-any.pkg.tar.xz
$ rm -r /etc/pacman.d/gnupg/
$ pacman-key --init
$ pacman-key --populate msys2
$ pacman -Syu

{% endhighlight %}

После выполнения последней команды обновится программа терминала. Старая программа при закрытии процесса зависает и блокирует процесс в оперативной памяти. На практике это приводит к тому, повторно запустить программу терминала уже невозможно. Для решения этой проблемы придется либо перезагрузить компьютер, либо "убить" заблокированный проесс из `командной строки DOS`:

{% highlight dos %}

С:\> taskkill /f /fi "MODULES eq msys-2.0.dll"

{% endhighlight %}

После этого уже из `терминала msys2` можно штатно обновить все пакеты:

```
$ pacman -Syyu
```

[msys2.org]: https://www.msys2.org/news/#2020-06-29-new-packagers
